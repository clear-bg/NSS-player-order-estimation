<UserControl
  x:Class="NssOrderTool.Views.SimulationView"
  xmlns="https://github.com/avaloniaui"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:vm="using:NssOrderTool.ViewModels"
  d:DesignHeight="500"
  d:DesignWidth="800"
  x:DataType="vm:SimulationViewModel"
  mc:Ignorable="d">

  <ScrollViewer VerticalScrollBarVisibility="Auto">

    <Grid Margin="20" ColumnDefinitions="*, 20, *">
      <StackPanel Grid.Column="0" Spacing="10">
        <TextBlock
          FontSize="16"
          FontWeight="Bold"
          Text="ðŸŽ® ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å…¥åŠ›" />
        <TextBlock
          FontSize="12"
          Foreground="Gray"
          Text="å‚åŠ ã™ã‚‹8äººã®åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚1ç•ªç›®ã¯éƒ¨å±‹ä¸»ï¼ˆå›ºå®šï¼‰ã§ã™ã€‚"
          TextWrapping="Wrap" />

        <ItemsControl ItemsSource="{Binding Inputs}">
          <ItemsControl.ItemTemplate>
            <DataTemplate x:DataType="vm:SimulationInputItem">
              <Grid Margin="0,5" ColumnDefinitions="30, *">
                <TextBlock
                  Grid.Column="0"
                  VerticalAlignment="Center"
                  FontWeight="Bold"
                  Text="{Binding Index, StringFormat='{}{0}.'}" />

                <AutoCompleteBox
                  Grid.Column="1"
                  FilterMode="Contains"
                  ItemsSource="{Binding $parent[UserControl].((vm:SimulationViewModel)DataContext).AllPlayerNames}"
                  MinimumPrefixLength="1"
                  Text="{Binding Name}"
                  Watermark="{Binding Placeholder}" />
              </Grid>
            </DataTemplate>
          </ItemsControl.ItemTemplate>
        </ItemsControl>

        <StackPanel
          Margin="0,10,0,0"
          Orientation="Horizontal"
          Spacing="10">
          <Button
            Background="#007ACC"
            Command="{Binding RunSimulationCommand}"
            Content="è¨ˆç®—ã™ã‚‹"
            FontWeight="Bold"
            Foreground="White" />
          <Button Command="{Binding ClearInputsCommand}" Content="ã‚¯ãƒªã‚¢" />
        </StackPanel>

        <TextBlock
          Margin="0,5,0,0"
          Foreground="Green"
          Text="{Binding StatusText}"
          TextWrapping="Wrap" />
      </StackPanel>

      <StackPanel Grid.Column="2" Spacing="10">
        <TextBlock
          FontSize="16"
          FontWeight="Bold"
          Text="ðŸ“Š æŽ¨å®šçµæžœ" />
        <TextBlock
          FontSize="12"
          Foreground="Gray"
          Text="å†…éƒ¨ãƒ¬ãƒ¼ãƒˆé †ã®äºˆæ¸¬ï¼ˆä¸Šã‹ã‚‰é †ã«ä¸¦ã³ã¾ã™ï¼‰" />

        <ListBox
          Height="400"
          Background="#F0F0F0"
          ItemsSource="{Binding SimulationResults}">
          <ListBox.ItemTemplate>
            <DataTemplate>
              <StackPanel Orientation="Horizontal" Spacing="5">

                <TextBlock
                  Width="30"
                  FontWeight="{Binding RankWeight}"
                  Foreground="{Binding RankColor}"
                  Text="{Binding RankText}"
                  TextAlignment="Right" />

                <TextBlock
                  FontWeight="Bold"
                  Foreground="Black"
                  Text="{Binding PlayerName}" />

                <TextBlock
                  VerticalAlignment="Center"
                  FontSize="11"
                  Foreground="Gray"
                  Text="{Binding Suffix}" />
              </StackPanel>
            </DataTemplate>
          </ListBox.ItemTemplate>
        </ListBox>
      </StackPanel>
    </Grid>
  </ScrollViewer>
</UserControl>
