<UserControl
  x:Class="NssOrderTool.Views.ArenaView"
  xmlns="https://github.com/avaloniaui"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:vm="using:NssOrderTool.ViewModels"
  xmlns:vmArena="using:NssOrderTool.ViewModels.Arena"
  d:DesignHeight="600"
  d:DesignWidth="800"
  x:DataType="vm:ArenaViewModel"
  mc:Ignorable="d">

  <!--  ãƒœã‚¿ãƒ³ã«å®šç¾©ã—ãŸã‚¯ãƒ©ã‚¹  -->
  <UserControl.Styles>
    <Style Selector="Button.RoundBtn /template/ ContentPresenter#PART_ContentPresenter">
      <Setter Property="Transitions">
        <Transitions>
          <DoubleTransition Property="Opacity" Duration="0:0:0.2" />
        </Transitions>
      </Setter>
    </Style>

    <Style Selector="Button.RoundBtn:pointerover /template/ ContentPresenter#PART_ContentPresenter">
      <Setter Property="Opacity" Value="0.8" />
    </Style>
  </UserControl.Styles>

  <!--  ç”»é¢ã‚’ä¸Š(ã‚¿ã‚¤ãƒˆãƒ«)ãƒ»ä¸­(è¡¨)ãƒ» ä¸‹(ä¿å­˜ãƒœã‚¿ãƒ³) ã®3ã¤ã«åˆ†å‰²  -->
  <Grid Margin="15" RowDefinitions="Auto, Auto, Auto">
    <StackPanel
      Grid.Row="0"
      Margin="0,0,0,15"
      Spacing="10">
      <TextBlock
        FontSize="20"
        FontWeight="Bold"
        Text="ðŸŸï¸ ã‚¢ãƒªãƒ¼ãƒŠé›†è¨ˆ" />
      <TextBlock
        FontSize="13"
        Foreground="#666666"
        Text="ä¸‹ã®ãƒœã‚¿ãƒ³ã§å„ãƒ©ã‚¦ãƒ³ãƒ‰ã®å‹åˆ©ãƒãƒ¼ãƒ ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€ã‚¹ã‚³ã‚¢ãŒè‡ªå‹•è¨ˆç®—ã•ã‚Œã¾ã™ã€‚" />
    </StackPanel>

    <!--  ã‚¹ã‚³ã‚¢è¡¨ã¨å…¥åŠ›ãƒœã‚¿ãƒ³ã®ã‚¨ãƒªã‚¢  -->
    <!--  ã‚¹ã‚³ã‚¢è¡¨å…¨ä½“ã®è¦‹ãŸç›®  -->
    <Border
      Grid.Row="1"
      Background="#f0f8ff"
      BorderBrush="#808080"
      BorderThickness="3">
      <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled">
        <StackPanel Margin="15">
          <StackPanel Orientation="Horizontal">
            <!--  Playerã®éƒ¨åˆ†  -->
            <!--  ãƒœãƒƒã‚¯ã‚¹ã®è¦‹ãŸç›®  -->
            <Border
              Width="80"
              Height="28"
              Background="#bbbbbb"
              BorderBrush="#555555"
              BorderThickness="0.8">
              <!--  ãƒ†ã‚­ã‚¹ãƒˆã®è¦‹ãŸç›®  -->
              <TextBlock
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                FontSize="12"
                FontWeight="Bold"
                Foreground="#333333"
                Text="Player" />
            </Border>

            <ItemsControl ItemsSource="{Binding RoundInputs}">
              <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                  <StackPanel Orientation="Horizontal" Spacing="0" />
                </ItemsPanelTemplate>
              </ItemsControl.ItemsPanel>
              <ItemsControl.ItemTemplate>
                <DataTemplate>
                  <!--  ãƒ©ã‚¦ãƒ³ãƒ‰ç•ªå·ã®éƒ¨åˆ†ã®è¦‹ãŸç›®  -->
                  <!--  ãƒœãƒƒã‚¯ã‚¹ã®è¦‹ãŸç›®  -->
                  <Border
                    Width="40"
                    Height="28"
                    Background="#bbbbbb"
                    BorderBrush="#555555"
                    BorderThickness="0.8">
                    <!--  ãƒ†ã‚­ã‚¹ãƒˆã®è¦‹ãŸç›®  -->
                    <TextBlock
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      FontSize="11"
                      FontWeight="Bold"
                      Foreground="#555555"
                      Text="{Binding RoundNumber, StringFormat='R{0}'}" />
                  </Border>
                </DataTemplate>
              </ItemsControl.ItemTemplate>
            </ItemsControl>

            <!--  Winsã®éƒ¨åˆ†  -->
            <!--  ãƒœãƒƒã‚¯ã‚¹ã®è¦‹ãŸç›®  -->
            <Border
              Width="40"
              Height="28"
              Background="#bbbbbb"
              BorderBrush="#555555"
              BorderThickness="0.8">
              <!--  ãƒ†ã‚­ã‚¹ãƒˆã®è¦‹ãŸç›®  -->
              <TextBlock
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                FontSize="12"
                FontWeight="Bold"
                Foreground="#2E7D32"
                Text="Win" />
            </Border>
            <!--  Rankã®éƒ¨åˆ†  -->
            <!--  ãƒœãƒƒã‚¯ã‚¹ã®è¦‹ãŸç›®  -->
            <Border
              Width="40"
              Height="28"
              Background="#bbbbbb"
              BorderBrush="#555555"
              BorderThickness="0.8">
              <!--  ãƒ†ã‚­ã‚¹ãƒˆã®è¦‹ãŸç›®  -->
              <TextBlock
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                FontSize="12"
                FontWeight="Bold"
                Foreground="#2E7D32"
                Text="Rank" />
            </Border>
          </StackPanel>

          <ItemsControl ItemsSource="{Binding PlayerRows}">
            <ItemsControl.ItemTemplate>
              <DataTemplate x:DataType="vmArena:ArenaRowViewModel">
                <StackPanel Orientation="Horizontal">

                  <!--  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼åè¡¨ç¤ºéƒ¨åˆ†  -->
                  <!--  ãƒœãƒƒã‚¯ã‚¹ã®è¦‹ãŸç›®  -->
                  <Border
                    Width="80"
                    Height="32"
                    Background="#dbdbdb"
                    BorderBrush="#555555"
                    BorderThickness="0.8">
                    <!--  ãƒ†ã‚­ã‚¹ãƒˆã®è¦‹ãŸç›®  -->
                    <TextBlock
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      FontSize="14"
                      FontWeight="Bold"
                      Foreground="#333333"
                      Text="{Binding Name}" />
                  </Border>

                  <!--  ã‚»ãƒ«ã®ç¹°ã‚Šè¿”ã—  -->
                  <ItemsControl ItemsSource="{Binding Cells}">
                    <ItemsControl.ItemsPanel>
                      <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal" />
                      </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                      <DataTemplate x:DataType="vmArena:ArenaCellViewModel">
                        <!--  1ãƒ©ã‚¦ãƒ³ãƒ‰åˆ†ã®ã‚»ãƒ«ã®è¦‹ãŸç›®  -->
                        <!--  ãƒœãƒƒã‚¯ã‚¹ã®è¦‹ãŸç›®  -->
                        <Border
                          Width="40"
                          Height="32"
                          Background="{Binding CellColor}"
                          BorderBrush="#555555"
                          BorderThickness="0.8">
                          <!--  ãƒ†ã‚­ã‚¹ãƒˆã®è¦‹ãŸç›®  -->
                          <TextBlock
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            FontSize="16"
                            FontWeight="Bold"
                            Foreground="{Binding ForeColor}"
                            Text="{Binding ResultMark}" />
                        </Border>
                      </DataTemplate>
                    </ItemsControl.ItemTemplate>
                  </ItemsControl>

                  <!--  Winã®é›†è¨ˆçµæžœã‚»ãƒ«éƒ¨åˆ†  -->
                  <!--  ãƒœãƒƒã‚¯ã‚¹ã®è¦‹ãŸç›®  -->
                  <Border
                    Width="40"
                    Height="32"
                    Background="#C6E0B4"
                    BorderBrush="#555555"
                    BorderThickness="0.8">
                    <!--  ãƒ†ã‚­ã‚¹ãƒˆã®è¦‹ãŸç›®  -->
                    <TextBlock
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      FontSize="14"
                      FontWeight="Bold"
                      Foreground="#333333"
                      Text="{Binding WinCount}" />
                  </Border>
                  <!--  Rankã®é›†è¨ˆçµæžœã‚»ãƒ«éƒ¨åˆ†  -->
                  <!--  ãƒœãƒƒã‚¯ã‚¹ã®è¦‹ãŸç›®  -->
                  <Border
                    Width="40"
                    Height="32"
                    Background="#C6E0B4"
                    BorderBrush="#555555"
                    BorderThickness="0.8">
                    <!--  ãƒ†ã‚­ã‚¹ãƒˆã®è¦‹ãŸç›®  -->
                    <TextBlock
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      FontSize="14"
                      FontWeight="Bold"
                      Foreground="#333333"
                      Text="{Binding Rank}" />
                  </Border>

                </StackPanel>
              </DataTemplate>
            </ItemsControl.ItemTemplate>
          </ItemsControl>

          <!--  ä»•åˆ‡ã‚Šç·š  -->
          <Separator
            Height="2"
            Margin="0,20"
            Background="#DDDDDD" />

          <!--  ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼åã®è¡¨ç¤ºåˆ†ã ã‘å³ã«ãšã‚‰ã™ãŸã‚  -->
          <StackPanel Margin="0,0,0,20" Orientation="Horizontal">
            <Border
              Width="80"
              Height="1"
              Background="Transparent" />

            <!--  ãƒœã‚¿ãƒ³éƒ¨åˆ†  -->
            <ItemsControl ItemsSource="{Binding RoundInputs}">
              <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                  <StackPanel Orientation="Horizontal" Spacing="0" />
                </ItemsPanelTemplate>
              </ItemsControl.ItemsPanel>
              <ItemsControl.ItemTemplate>
                <DataTemplate>
                  <!--  ãƒœã‚¿ãƒ³ã®ãƒ‡ã‚¶ã‚¤ãƒ³  -->
                  <!--  ãƒœã‚¿ãƒ³ã®è¦‹ãŸç›®  -->
                  <Button
                    Width="40"
                    Height="55"
                    Margin="0,0,1,0"
                    Padding="0"
                    Background="{Binding CellColor}"
                    BorderBrush="#606060"
                    BorderThickness="1"
                    Classes="RoundBtn"
                    Command="{Binding ToggleWinnerCommand}"
                    CornerRadius="4">
                    <!--  ãƒœã‚¿ãƒ³ã®ä¸­èº«ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ  -->
                    <Grid RowDefinitions="Auto, *">
                      <!--  R1ã¨ã‹ã®ãƒ†ã‚­ã‚¹ãƒˆã®è¦‹ãŸç›®  -->
                      <TextBlock
                        Margin="0,4,0,0"
                        HorizontalAlignment="Center"
                        FontSize="11"
                        Foreground="#333333"
                        Opacity="0.9"
                        Text="{Binding RoundNumber, StringFormat='R{0}'}" />
                      <!--  "-"ã¨ã‹"Blue"ã¨ã‹ã®ãƒ†ã‚­ã‚¹ãƒˆã®è¦‹ãŸç›®  -->
                      <TextBlock
                        Grid.Row="1"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        FontSize="13"
                        FontWeight="Black"
                        Foreground="#333333"
                        Text="{Binding DisplayText}" />
                    </Grid>
                  </Button>
                </DataTemplate>
              </ItemsControl.ItemTemplate>
            </ItemsControl>
          </StackPanel>

        </StackPanel>
      </ScrollViewer>
    </Border>

    <!--  ä¸‹æ®µã€ä¿å­˜ãƒœã‚¿ãƒ³ã¨ãƒ†ã‚­ã‚¹ãƒˆ  -->
    <StackPanel
      Grid.Row="2"
      Margin="0,15"
      VerticalAlignment="Top"
      Orientation="Horizontal"
      Spacing="20">

      <!--  ä¿å­˜ãƒœã‚¿ãƒ³  -->
      <Button
        Padding="30,12"
        Background="#007ACC"
        Command="{Binding SaveSessionCommand}"
        CornerRadius="6">
        <StackPanel Orientation="Horizontal" Spacing="8">
          <TextBlock
            VerticalAlignment="Center"
            FontSize="16"
            Text="ðŸ’¾" />
          <TextBlock
            VerticalAlignment="Center"
            FontSize="14"
            FontWeight="Bold"
            Foreground="White"
            Text="çµæžœã‚’ä¿å­˜ã™ã‚‹" />
        </StackPanel>
      </Button>

      <!--  ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸  -->
      <TextBlock
        VerticalAlignment="Center"
        FontSize="14"
        FontWeight="Bold"
        Foreground="#2E7D32"
        Text="{Binding StatusText}" />
    </StackPanel>

  </Grid>
</UserControl>
