<UserControl
  x:Class="NssOrderTool.Views.ArenaView"
  xmlns="https://github.com/avaloniaui"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:vm="using:NssOrderTool.ViewModels"
  xmlns:vmArena="using:NssOrderTool.ViewModels.Arena"
  d:DesignHeight="500"
  d:DesignWidth="800"
  x:DataType="vm:ArenaViewModel"
  mc:Ignorable="d">

  <Grid Margin="10" RowDefinitions="Auto, Auto, *">

    <StackPanel
      Grid.Row="0"
      Margin="0,0,0,10"
      Spacing="5">
      <TextBlock
        FontSize="18"
        FontWeight="Bold"
        Text="ðŸŸï¸ ã‚¢ãƒªãƒ¼ãƒŠé›†è¨ˆ" />
      <TextBlock Foreground="Gray" Text="å„ãƒ©ã‚¦ãƒ³ãƒ‰ã®å‹åˆ©ãƒãƒ¼ãƒ ã‚’é¸æŠžã—ã¦ãã ã•ã„ã€‚" />
    </StackPanel>

    <Border
      Grid.Row="1"
      BorderBrush="#D0D0D0"
      BorderThickness="1">
      <ScrollViewer HorizontalScrollBarVisibility="Auto">
        <StackPanel Margin="10">

          <StackPanel Orientation="Horizontal">
            <Border
              Width="80"
              Height="60"
              Background="Transparent" />

            <ItemsControl ItemsSource="{Binding RoundInputs}">
              <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                  <StackPanel Orientation="Horizontal" Spacing="0" />
                </ItemsPanelTemplate>
              </ItemsControl.ItemsPanel>
              <ItemsControl.ItemTemplate>
                <DataTemplate>
                  <Button
                    Width="60"
                    Height="60"
                    Background="{Binding CellColor}"
                    BorderBrush="White"
                    BorderThickness="0.5"
                    Command="{Binding ToggleWinnerCommand}"
                    CornerRadius="0">
                    <Grid RowDefinitions="Auto, *">
                      <TextBlock
                        Margin="0,2"
                        HorizontalAlignment="Center"
                        FontSize="10"
                        Text="{Binding RoundNumber}" />
                      <TextBlock
                        Grid.Row="1"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        FontWeight="Bold"
                        Foreground="{Binding ForeColor}"
                        Text="{Binding DisplayText}" />
                    </Grid>
                  </Button>
                </DataTemplate>
              </ItemsControl.ItemTemplate>
            </ItemsControl>
          </StackPanel>

          <Separator Margin="0,10" />

          <StackPanel Orientation="Horizontal">
            <Border
              Width="80"
              Height="24"
              Background="Transparent" />

            <ItemsControl ItemsSource="{Binding RoundInputs}">
              <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                  <StackPanel Orientation="Horizontal" Spacing="0" />
                </ItemsPanelTemplate>
              </ItemsControl.ItemsPanel>
              <ItemsControl.ItemTemplate>
                <DataTemplate>
                  <Border
                    Width="60"
                    Height="24"
                    Background="#F0F0F0"
                    BorderBrush="Gray"
                    BorderThickness="0.5">
                    <TextBlock
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      FontSize="11"
                      FontWeight="Bold"
                      Foreground="#333333"
                      Text="{Binding RoundNumber}" />
                  </Border>
                </DataTemplate>
              </ItemsControl.ItemTemplate>
            </ItemsControl>

            <Border
              Width="60"
              Height="24"
              Background="#EEFFEE"
              BorderBrush="Gray"
              BorderThickness="0.5">
              <TextBlock
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                FontSize="11"
                FontWeight="Bold"
                Foreground="#006600"
                Text="Wins" />
            </Border>

            <Border
              Width="60"
              Height="24"
              Background="#FFFFEE"
              BorderBrush="Gray"
              BorderThickness="0.5">
              <TextBlock
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                FontSize="11"
                FontWeight="Bold"
                Foreground="#666600"
                Text="Rank" />
            </Border>
          </StackPanel>

          <ItemsControl ItemsSource="{Binding PlayerRows}">
            <ItemsControl.ItemTemplate>
              <DataTemplate x:DataType="vmArena:ArenaRowViewModel">
                <StackPanel Orientation="Horizontal">

                  <Border
                    Width="80"
                    Height="30"
                    Background="#E0E0E0"
                    BorderBrush="Gray"
                    BorderThickness="0,0,1,1">
                    <TextBlock
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      FontWeight="Bold"
                      Foreground="Black"
                      Text="{Binding Name}" />
                  </Border>

                  <ItemsControl ItemsSource="{Binding Cells}">
                    <ItemsControl.ItemsPanel>
                      <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal" />
                      </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                      <DataTemplate x:DataType="vmArena:ArenaCellViewModel">
                        <Border
                          Width="60"
                          Height="30"
                          Background="{Binding CellColor}"
                          BorderBrush="White"
                          BorderThickness="0.5">
                          <TextBlock
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            FontSize="11"
                            FontWeight="Bold"
                            Foreground="{Binding ForeColor}"
                            Text="{Binding ResultMark}" />
                        </Border>
                      </DataTemplate>
                    </ItemsControl.ItemTemplate>
                  </ItemsControl>

                  <Border
                    Width="60"
                    Height="30"
                    Background="#F9FFF9"
                    BorderBrush="Gray"
                    BorderThickness="0,0,1,1">
                    <TextBlock
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      FontWeight="SemiBold"
                      Foreground="Black"
                      Text="{Binding WinCount}" />
                  </Border>

                  <Border
                    Width="60"
                    Height="30"
                    Background="#FFFFF9"
                    BorderBrush="Gray"
                    BorderThickness="0,0,1,1">
                    <TextBlock
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      FontWeight="SemiBold"
                      Foreground="Black"
                      Text="{Binding Rank}" />
                  </Border>

                </StackPanel>
              </DataTemplate>
            </ItemsControl.ItemTemplate>
          </ItemsControl>

        </StackPanel>
      </ScrollViewer>
    </Border>

    <StackPanel
      Grid.Row="2"
      Margin="0,15"
      Orientation="Horizontal"
      Spacing="15">
      <Button
        Padding="20,10"
        Background="#007ACC"
        Command="{Binding SaveSessionCommand}"
        Content="çµæžœã‚’ä¿å­˜ã™ã‚‹"
        FontWeight="Bold"
        Foreground="White" />

      <TextBlock
        VerticalAlignment="Center"
        FontSize="14"
        FontWeight="Bold"
        Foreground="Green"
        Text="{Binding StatusText}" />
    </StackPanel>

  </Grid>
</UserControl>
