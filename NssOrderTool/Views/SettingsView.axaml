<UserControl
  x:Class="NssOrderTool.Views.SettingsView"
  xmlns="https://github.com/avaloniaui"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:vm="using:NssOrderTool.ViewModels"
  d:DesignHeight="500"
  d:DesignWidth="800"
  x:DataType="vm:SettingsViewModel"
  mc:Ignorable="d">

  <ScrollViewer VerticalScrollBarVisibility="Auto">

    <Grid Margin="20" IsEnabled="{Binding !IsBusy}">
      <StackPanel
        MaxWidth="500"
        HorizontalAlignment="Left"
        Spacing="20">

        <StackPanel Spacing="5">
          <TextBlock
            FontSize="20"
            FontWeight="Bold"
            Text="âš™ï¸ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š" />
          <TextBlock
            FontSize="12"
            Foreground="Gray"
            Text="å¤‰æ›´ã‚’åæ˜ ã™ã‚‹ã«ã¯ä¿å­˜å¾Œã«ã‚¢ãƒ—ãƒªã‚’å†èµ·å‹•ã—ã¦ãã ã•ã„ã€‚" />
        </StackPanel>

        <ProgressBar
          Height="2"
          IsIndeterminate="True"
          IsVisible="{Binding IsBusy}" />

        <Border
          Padding="15"
          BorderBrush="#DDDDDD"
          BorderThickness="1"
          CornerRadius="5">
          <StackPanel Spacing="15">
            <TextBlock FontWeight="Bold" Text="åŸºæœ¬è¨­å®š" />

            <Grid ColumnDefinitions="180, *">
              <TextBlock
                Grid.Column="0"
                VerticalAlignment="Center"
                Text="ç’°å¢ƒ (Environment)" />
              <ComboBox
                Grid.Column="1"
                HorizontalAlignment="Stretch"
                ItemsSource="{Binding EnvironmentList}"
                SelectedItem="{Binding Environment}" />
            </Grid>
          </StackPanel>
        </Border>

        <Border
          Padding="15"
          BorderBrush="#DDDDDD"
          BorderThickness="1"
          CornerRadius="5">
          <StackPanel Spacing="15">
            <CheckBox
              Content="AWS SSM (Session Manager) ã‚’ä½¿ç”¨ã™ã‚‹"
              FontWeight="Bold"
              IsChecked="{Binding UseSsm}" />

            <StackPanel IsEnabled="{Binding UseSsm}" Spacing="10">
              <Grid ColumnDefinitions="180, *">
                <TextBlock
                  Grid.Column="0"
                  VerticalAlignment="Center"
                  Text="Instance ID" />
                <TextBox
                  Grid.Column="1"
                  Text="{Binding InstanceId}"
                  Watermark="i-xxxxxxxxxxxxxxxxx" />
              </Grid>

              <Grid ColumnDefinitions="180, *">
                <TextBlock
                  Grid.Column="0"
                  VerticalAlignment="Center"
                  Text="Remote Host" />
                <TextBox
                  Grid.Column="1"
                  Text="{Binding RemoteHost}"
                  Watermark="RDS Endpoint" />
              </Grid>

              <Grid ColumnDefinitions="180, *, 20, 180, *">
                <TextBlock
                  Grid.Column="0"
                  VerticalAlignment="Center"
                  Text="Remote Port" />
                <NumericUpDown
                  Grid.Column="1"
                  FormatString="0"
                  Value="{Binding RemotePort}" />

                <TextBlock
                  Grid.Column="3"
                  VerticalAlignment="Center"
                  Text="Local Port" />
                <NumericUpDown
                  Grid.Column="4"
                  FormatString="0"
                  Value="{Binding LocalPort}" />
              </Grid>
            </StackPanel>
          </StackPanel>
        </Border>

        <StackPanel Spacing="10">
          <TextBlock
            FontWeight="Bold"
            Foreground="{Binding StatusBrush}"
            Text="{Binding StatusMessage}"
            TextWrapping="Wrap" />
          <Grid ColumnDefinitions="*, 10, *, 10, *">

            <Button
              Grid.Column="0"
              HorizontalAlignment="Stretch"
              HorizontalContentAlignment="Center"
              Command="{Binding TestConnectionCommand}"
              Content="ðŸ”„ æŽ¥ç¶šãƒ†ã‚¹ãƒˆ" />

            <Button
              Grid.Column="2"
              HorizontalAlignment="Stretch"
              HorizontalContentAlignment="Center"
              Background="#007ACC"
              Command="{Binding SaveSettingsCommand}"
              Content="ï¿½ è¨­å®šã‚’ä¿å­˜"
              FontWeight="Bold"
              Foreground="White" />

            <Button
              Grid.Column="4"
              HorizontalAlignment="Stretch"
              HorizontalContentAlignment="Center"
              Background="#DDDDDD"
              Command="{Binding RestartApplicationCommand}"
              Content="ðŸš€ ã‚¢ãƒ—ãƒªã‚’å†èµ·å‹•"
              Foreground="Black" />
          </Grid>
        </StackPanel>

      </StackPanel>
    </Grid>
  </ScrollViewer>
</UserControl>
